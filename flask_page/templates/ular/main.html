{# ular/main.html #}
{% extends "ular/base.html" %}


{% block content %}
    <p>Ular</p>
    
    <br/>
    <p>api/createroom</p>
    <form>
        <input type="text" id="player" placeholder="player" />
        <input type="text" id="color" placeholder="color" />
        <button type="button" onclick="createroom()">Submit</button>
    </form>
    <p id="outputcreateroom">json output from api/createroom</p>
    <br/>
    <br/>
    <p>api/joinroom</p>
    <form>
        <input type="text" id="code" placeholder="code" />
        <input type="text" id="player" placeholder="player" />
        <input type="text" id="color" placeholder="color" />
        <button type="button" onclick="joinroom()">Submit</button>
    </form>
    <p id="outputjoinroom">json output from api/joinroom</p>
    <br/>
    <br/>
    <p>api/state</p>
    <form>
        <input type="text" id="code" placeholder="code" />
        <button type="button" onclick="state()">Submit</button>
    </form>
    <p id="outputstate">json output from api/state</p>
    <br/>
    <br/>
    <p>api/startgame</p>
    <form>
        <input type="text" id="code" placeholder="code" />
        <button type="button" onclick="startgame()">Submit</button>
    </form>
    <p id="outputstartgame">json output from api/startgame</p>
    <br/>
    <br/>
    <p>api/rolldice</p>
    <form>
        <input type="text" id="code" placeholder="code" />
        <input type="text" id="player" placeholder="player" />
        <button type="button" onclick="rolldice()">Submit</button>
    </form>
    <p id="outputrolldice">json output from api/rolldice</p>
    <script>
        
        function createroom() {
            const player = document.getElementById("player").value;
            const color = document.getElementById("color").value;
            const outputcreateroom = document.getElementById("outputcreateroom");
            outputcreateroom.innerHTML = "Creating room...";
            fetch(`/api/ular/createroom?player=${encodeURIComponent(player)}&color=${encodeURIComponent(color)}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => response.json()).then(data => {
                outputcreateroom.innerHTML = JSON.stringify(data);
            }).catch(error => {
                outputcreateroom.innerHTML = "Error: " + error;
            });
        }

        function joinroom() {
            const code = document.getElementById("code").value;
            const player = document.getElementById("player").value;
            const color = document.getElementById("color").value;
            const outputjoinroom = document.getElementById("outputjoinroom");
            outputjoinroom.innerHTML = "Joining room...";
            fetch(`/api/ular/joinroom?code=${encodeURIComponent(code)}&player=${encodeURIComponent(player)}&color=${encodeURIComponent(color)}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => response.json()).then(data => {
                outputjoinroom.innerHTML = JSON.stringify(data);
            }).catch(error => {
                outputjoinroom.innerHTML = "Error: " + error;
            });
        }

        function state() {
            const code = document.getElementById("code").value;
            const outputstate = document.getElementById("outputstate");
            outputstate.innerHTML = "Getting state...";
            fetch(`/api/ular/state?code=${encodeURIComponent(code)}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => response.json()).then(data => {
                outputstate.innerHTML = JSON.stringify(data);
            }).catch(error => {
                outputstate.innerHTML = "Error: " + error;
            });
        }

        function startgame() {
            const code = document.getElementById("code").value;
            const outputstartgame = document.getElementById("outputstartgame");
            outputstartgame.innerHTML = "Starting game...";
            fetch(`/api/ular/startgame?code=${encodeURIComponent(code)}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => response.json()).then(data => {
                outputstartgame.innerHTML = JSON.stringify(data);
            }).catch(error => {
                outputstartgame.innerHTML = "Error: " + error;
            });
        }

        function rolldice() {
            const code = document.getElementById("code").value;
            const player = document.getElementById("player").value;
            const outputrolldice = document.getElementById("outputrolldice");
            outputrolldice.innerHTML = "Rolling dice...";
            fetch(`/api/ular/rolldice?code=${encodeURIComponent(code)}&player=${encodeURIComponent(player)}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => response.json()).then(data => {
                outputrolldice.innerHTML = JSON.stringify(data);
            }).catch(error => {
                outputrolldice.innerHTML = "Error: " + error;
            });
        }

        function reset() {
            const outputcreateroom = document.getElementById("outputcreateroom");
            outputcreateroom.innerHTML = "";
            const outputjoinroom = document.getElementById("outputjoinroom");
            outputjoinroom.innerHTML = "";
            const outputstate = document.getElementById("outputstate");
            outputstate.innerHTML = "";
            const outputstartgame = document.getElementById("outputstartgame");
            outputstartgame.innerHTML = "";
            const outputrolldice = document.getElementById("outputrolldice");
            outputrolldice.innerHTML = "";
        }
    </script>
    
{% endblock %}